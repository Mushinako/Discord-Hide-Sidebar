"use strict";function e(){const e=document.getElementsByClassName(k);if(1!==e.length)return;const i=e[0];if(i.classList.contains(C))return;const o=document.getElementsByClassName(T);if(1===o.length){if(void 0===V){V=document.createElement("div"),V.classList.add(...I);for(const[e,t]of Object.entries(K))V.setAttribute(e,t)}U=o[0],t(),V.addEventListener("click",n),U.style.transition=`width ${G}s ease-in-out`,i.appendChild(V),document.body.classList.contains(R)||(document.addEventListener("keydown",l),document.body.classList.add(R)),i.classList.add(C),j=!0}}async function t(){!0!==F&&(F=!0,"1"===await d()?i():o(),F=!1)}function n(){!0!==F&&(F=!0,V.classList.contains(g)?o():i(),F=!1)}function i(){if(u("1"),void 0===V||void 0===U)return;if(V.classList.add(g),V.innerHTML=D,U.style.width=S,U.style.height=$,U.classList.contains(z))return;const e=document.createElement("div");e.style.width=S;const t=U.parentElement.parentElement,n=document.createElement("div");setTimeout(()=>{U.parentElement.insertBefore(e,U),n.appendChild(U),n.style.position="absolute",n.style.zIndex="2",t.appendChild(n),U.addEventListener("mouseenter",s),U.addEventListener("mouseleave",r),U.classList.add(z)},Q)}function o(){if(u("0"),void 0===V||void 0===U)return;if(V.classList.remove(g),V.innerHTML=Y,!U.classList.contains(z))return void(U.style.width="");const e=U.parentElement.parentElement,t=e.children[e.childElementCount-2];if(2!==t.childElementCount)throw new ReferenceError("Invalid showSide parent");t.removeChild(t.firstElementChild),t.insertBefore(U,t.firstElementChild),setTimeout(()=>{U.style.width="",U.style.height=""},100),U.removeEventListener("mouseenter",s),U.removeEventListener("mouseleave",r),U.classList.remove(z),e.childElementCount>1&&e.removeChild(e.lastElementChild)}function s(e){A=setTimeout(()=>{e.target.style.width=""},100)}function r(e){clearTimeout(A),A=void 0,e.target.style.width=S}function l(t){if(t.ctrlKey)return"L"===t.key?void e():"l"===t.key?void n():"w"===t.key?void window.close():void 0;"PageDown"===t.key&&t.altKey&&c()}function c(){const e=document.getElementsByClassName(O);for(const t of e){const e=t.firstChild.textContent.trim();if(e===N)return void t.click()}const t=document.getElementsByClassName(H);if(1!==t.length)throw ReferenceError("Invalid scroller div");const n=t[0],i={top:n.scrollHeight,left:n.scrollLeft,behavior:"smooth"};n.scrollTo(i)}function a(){const e=location.pathname.split("/");return e.length<3?null:e[2]===L||/^\d+$/.test(e[2])?"/"+e[2]:null}async function d(){const e=a();if(null===e)return null;const t=await E.match(e);return void 0===t?null:await t.text()}function u(e){const t=a();null!==t&&E.put(t,new Response(e))}function m(){E.keys().then(e=>{for(const t of e)E.delete(t)})}function v(e,t){const n=document.getElementsByClassName(e);if(1!==n.length)throw new ReferenceError(`Incorrect window ${t}`);return n[0]}function f(){e(),y(),p()}function h(){e()}function w(){const e=v(T,"sidebar");void 0!==Z&&Z.disconnect(),Z=new MutationObserver(f),Z.observe(e,P)}function p(){try{var e=v(B,"right side")}catch(e){return}void 0!==_&&_.disconnect(),_=new MutationObserver(h),_.observe(e,P)}function y(){const e=v(M,"combined");void 0!==q&&q.disconnect(),q=new MutationObserver(h),q.observe(e,P)}var b=void 0,E=void 0,L="@me",g="hide-side",C="hide-sidebar-init",k="toolbar-1t6TWx",x="wrapper-1Rf91z",T="sidebar-2K8pFh",B="chat-3bRxxu",M="content-98HsJk",H="scroller-2LSbBU",O="barButtonAlt-mYL1lj",R="key-el",z="sidebar-el",N="Jump To Present",I=["iconWrapper-2OrFZ1","clickable-3rdHwn","focusable-1YV_-H"],K={role:"button","aria-label":"Toggle Sidebar",tabindex:"0"},P={childList:!0},S="20px",$="calc(100vh - 22px)",j=!1,A=void 0,F=!1,J='<svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="',W='"></path></svg>',Y=J+"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"+W,D=J+"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"+W,U=void 0,V=void 0,Z=void 0,_=void 0,q=void 0,G=.2,Q=1e3*G,X=e=>new Promise(t=>setTimeout(t,e));(async()=>{for(b=await navigator.storage.persist(),b||console.log("%cOh no no save","color:red;font-size:96px;-webkit-text-stroke:2px yellow;"),E=await caches.open(g);!j;)await X(1e3),e();w(),y(),p()})();